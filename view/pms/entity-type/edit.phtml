<section class="entity-type-edit">
    <?php 
        $this->headStyle()->appendStyle('footer', 'clear: both');
        $id = $this->id;
        $form = $this->form;
        $model = $this->model;
        if($id)
        {
            $id = (int)$id;
            $form->setAttribute('action', $this->url('pms/entity-type', [                
                'action' => 'process',
                'id' => $id,
            ]));
        }
        else {
            $form->setAttribute('action', $this->url('pms/entity-type', [
                'action' => 'process',
            ]));
        }        
        echo $this->form()->openTag($form);
    ?>

    <?php if(!$id):?>
    <h2>New Object Type</h2>
    <?php else:?>
    <h2>Change '<?php echo $model->name?>' details</h2>
    <?php endif;?>
    <div class="general-data">
    <dl>
        <dt><?php echo $this->formLabel($form->get('name')) ?></dt>
        <dd>
            <?php echo $this->formElement($form->get('name')) ?>
            <?php echo $this->formElementErrors($form->get('name'))?>
        </dd>
        <dt><?php echo $this->formLabel($form->get('description')) ?></dt>
        <dd>
            <?php echo $this->formElement($form->get('description')) ?>
            <?php echo $this->formElementErrors($form->get('description'))?>
        </dd>
        
        <dd>
            <?php echo $this->formElement($form->get('submit')) ?>
        </dd>
    </dl>
    </div>
    <div class='attribute-data'>
        <h3>Parameters</h3>
        <?php if (isset($model->attributes)):?>        
        <table class='table'>
            <tr>
                <th>Parameter</th>
                <th>Type</th>
                <th>Action</th>
            </tr>
            <?php foreach($model->attributes as $attribute):?>
            <tr>
                <td><?php echo $attribute->label?></td>
                <td><?php echo $attribute->type?></td>
                <td><a href='/pms/entity-type/editAttribute/<?php echo $attribute->internal_id?>'>Edit</a> | <a href=''>Delete</a></td>
            </tr>
            <?php endforeach;?>
        </table>   
        <?php else:?>
            <p class='error'>No defined parameters yet.
        <?php endif;?>
    </div>
    <?php echo $this->form()->closeTag() ?>
    <a href='/pms/entity-type/editAttribute'>Add new</a>
</section>

